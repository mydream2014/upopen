require.config({map:{"*":{css:"./core/css.min"}},baseUrl:basePath,paths:{base:"core/base",all:"public/all",dialog:"widget/dialog/dialog",doc:"public/zhdoc"}}),define(["dialog","doc","base","all","css!./module/parters/parters"],function(e,t){function r(e){$(".errorTip").html(e)}function i(){$(".errorTip").html("")}function s(){$(".dialog").hide(),$(".dialog_mask").hide(),$("#parterType").val(""),$("#company").val("")}function o(){$(".dialog").show(),$(".dialog_mask").show()}function f(e){return e.trim()?(i(),!0):(r("请选择品类"),!1)}function l(e){return e.trim()?(i(),!0):(r("请输入厂商"),!1)}function c(){return!f(u.val())||!l(a.val())?!1:($.ajax({type:"post",url:"/addParter",data:{phone:$.cookies.get("username"),company:a.val(),model:t.parterModel[u.val()],status:0,date:"20150415",annex:""},success:function(e){e.code==0&&($(".addParterItem").hide(),$("#parterItems").show(),d({company:a.val(),model:t.parterModel[u.val()],status:0,date:"20150415"}),s()),dialog.show(t.errorCode[e.code]||"未知错误["+e.code+"]")}}),!1)}function h(){$.ajax({type:"post",url:"/fetchParters",data:{phone:$.cookies.get("username")},success:function(e){e.code==0&&(e.data.length?($("#parterItems").show(),p(e.data)):$(".addParterItem").show())}})}function p(e){$.each(e,function(e,t){d(t)})}function d(e){var n=["<tr>","<td>"+e.company+"</td>","<td>"+t.parterModelNum[e.model]+"</td>","<td>"+["未上传","未审核","已通过","未通过"][e.status]+"</td>","<td>"+e.date+"</td>","</tr>"].join("");$(n).insertBefore($("#addItem"))}$(".addItem").on("click",function(){o()});var n=["电梯系统","空调设备","厨房电器"];$(".dialog_closebtn").on("click",function(){s()});var u=$("#parterType"),a=$("#company");u.on("click",function(){$(".parterTypeList").toggle()}),$(".parterTypeList a").on("click",function(e){$("#parterType").val(e.target.innerHTML),$(".parterTypeList").hide()}),a.on("change",function(){l(this.value)}),$("#formParter").on("submit",c),$("#dialog_cancel").on("click",function(){s()}),h()});