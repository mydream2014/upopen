require.config({map:{"*":{css:"./core/css.min"}},baseUrl:basePath,paths:{base:"core/base",dialog:"widget/dialog/dialog",all:"public/all",doc:"public/zhdoc"}}),define(["base","dialog","doc","all","css!./module/index/index"],function(e,t,n){function i(e){this.current=0,this.auto=!0,this.init(e)}function o(e){$("#loginPro").show().addClass("loginPro"),$("#loginPro").html(e)}var r=new t.Dialog;$(".login .qrcode").click(function(){$(".loginTextBox").css("display","none"),$(".loginQrcodeBox").css("display","block")}),$(".tcode .qrcode").click(function(){$(".loginTextBox").css("display","block"),$(".loginQrcodeBox").css("display","none")}),$("#loginForm").each(function(){}),$("#uname").val($.cookies.get("username")||""),$("#icodeImg").on("click",function(){$(this).attr("src","http://dev.qjdchina.com/front/user/verifyCode/getVerifyGgCode.htm?time="+Math.random())}),e.extend(i.prototype,{defaults:{},init:function(e){this.render(e)},render:function(e){this.createItems(e),this.createPointer(e),this.animAuto(),this.handler(e)},createItems:function(e){var t=$("<ul>").addClass("slide-box clearfix").css("height","360"),n;this.items=[];while(n=e.items.shift())this.items.push(this.create(n,e.path));this.items[0].css("opacity",1).css("z-index","11"),t.append(this.items),e.renderTo.append(t)},createPointer:function(e){var t=$("<div>").addClass("slide-pointer clearfix"),n=this.items.length,r=0,i,s=this;this.pointers=[];var o=$("<a>").addClass("slide-arrow").html("&lt");o.on("click",function(){s.anim(s.current-1)}),this.pointers.push(o);while(r++<n)i=$("<a>").addClass("slide-pointerel"),!function(e){i.on("click",function(){s.anim(e)})}(r-1),this.pointers.push(i);var u=$("<a>").addClass("slide-arrow").html("&gt");u.on("click",function(){s.anim(s.current+1)}),this.pointers.push(u),t.css({width:20*(n+2),"margin-left":-20*(n+2)/2}),t.append(this.pointers),this.pointerAnim(0),e.renderTo.append(t)},create:function(e,t){var n=$('<li style="height: 360px;background: url('+t+e.src+') center no-repeat">');return n.append($("<a>").attr({href:e.href||"javascript:void(0)",target:"_blank"}).addClass("slide-box-link")),n},handler:function(e){var t=this;$(".banner").on("mouseover",function(){t.auto=!1}).on("mouseout",function(){t.auto=!0})},anim:function(e){e>=this.items.length?e=0:e<0&&(e=this.items.length-1),this.lastel=this.lastel||this.items[e],this.lastel.animate({opacity:0}).css("z-index","10"),this.current=e,this.pointerAnim(e),this.lastel=this.items[e].animate({opacity:1}).css("z-index","11")},pointerAnim:function(e){$.each(this.pointers,function(e,t){t.removeClass("slide-pointerel-cur")}),this.pointers[e+1].addClass("slide-pointerel-cur")},animAuto:function(e){var t=this,e=e||this.current;this.lastel=t.items[e],setInterval(function(){if(!t.auto)return!1;t.lastel.animate({opacity:0}).css("z-index","10"),++e>=t.items.length&&(e=0),t.current=e,t.pointerAnim(e),t.lastel=t.items[e].animate({opacity:1}).css("z-index","11")},5e3)}});var s=new i({path:"/module/index/imgs/",items:[{src:"banner1.png"},{src:"banner2.jpg"},{src:"banner3.jpg"}],renderTo:$(".slideWrap")});$("#phone").on("change",function(e){var t=this.value.trim();t?/1\d{10}/.test(t)?$("#loginPro").html("&nbsp;").removeClass("loginPro"):o("请输入正确的手机号"):o("请输入手机号")}),$("#password").on("change",function(e){var t=this.value.trim();t?/.{6,16}/.test(t)?$("#loginPro").html("&nbsp;").removeClass("loginPro"):o("登录密码必须由6-16位字符组成"):o("请输入密码")});var u=$("#phone"),a=$("#password"),f={parameterName:"",token:""};$("#loginForm").on("submit",function(){var e={userName:u.val(),password:a.val()};return e[f.parameterName]=f.token,$.ajax({type:"post",url:"login",data:e,success:function(e){e.code==1&&(f.parameterName=e.message.parameterName,f.token=e.message.token),r.show(n.errorCode[e.code]||"未知错误["+e.code+"]")},error:function(e){}}),!1}),$("#time").html(17-(new Date).getDate())});